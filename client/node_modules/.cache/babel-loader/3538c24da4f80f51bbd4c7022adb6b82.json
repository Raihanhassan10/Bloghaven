{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rihan\\\\Downloads\\\\Blog-Website-main\\\\Blog-Website-main\\\\client\\\\src\\\\components\\\\Post\\\\UpdateView.jsx\",\n    _s = $RefreshSig$();\n\nimport { Box, makeStyles, FormControl, InputBase, Button, TextareaAutosize } from \"@material-ui/core\";\nimport { useState, useEffect } from \"react\";\nimport { AddCircle } from \"@material-ui/icons\";\nimport { getPost, updatePost, uploadFile } from \"../../services/api\";\nimport { useHistory } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Styles = makeStyles(_c = theme => ({\n  container: {\n    padding: \"0px 100px\",\n    [theme.breakpoints.down(\"md\")]: {\n      padding: 0\n    }\n  },\n  image: {\n    width: \"100%\",\n    height: \"50vh\",\n    objectFit: \"cover\"\n  },\n  form: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    marginTop: \"10px\"\n  },\n  textfield: {\n    flex: 1,\n    fontSize: 24,\n    margin: \"0px 25px\"\n  },\n  textarea: {\n    marginTop: 10,\n    width: '100%',\n    border: 'none',\n    fontSize: 20,\n    '&:focus-visible': {\n      outline: 'none'\n    }\n  }\n}));\n_c2 = Styles;\nconst initialValues = {\n  title: \"\",\n  description: \"\",\n  picture: \"\",\n  username: \"anubhavlal\",\n  categories: \"All\",\n  createdDate: new Date()\n};\n\nconst UpdateView = _ref => {\n  _s();\n\n  let {\n    match\n  } = _ref;\n  const classes = Styles();\n  const history = useHistory();\n  const [post, setPost] = useState(initialValues);\n  const [file, setFile] = useState('');\n  const [image, setImage] = useState('');\n  const url = post.picture ? post.picture : \"https://images.pexels.com/photos/374631/pexels-photo-374631.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940\";\n  useEffect(() => {\n    const getImage = async () => {\n      if (file) {\n        const data = new FormData();\n        data.append(\"name\", file.name);\n        data.append(\"file\", file);\n        let image = await uploadFile(data);\n        post.picture = image.data;\n        setImage(image.data);\n      }\n    };\n\n    getImage();\n  }, [file, post]);\n  useEffect(() => {\n    const fetchData = async () => {\n      let data = await getPost(match.params.id);\n      console.log(data);\n      setPost(data);\n    };\n\n    fetchData();\n  }, [match.params.id]);\n\n  const handleChange = e => {\n    setPost({ ...post,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const updateBlog = async () => {\n    await updatePost(match.params.id, post);\n    history.push(`/details/${match.params.id}`);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Box, {\n    className: classes.container,\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: url,\n      alt: \"banner\",\n      className: classes.image\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n      className: classes.form,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"fileInput\",\n        children: /*#__PURE__*/_jsxDEV(AddCircle, {\n          fontSize: \"large\",\n          color: \"error\",\n          cursor: \"pointer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 45\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        id: \"fileInput\",\n        style: {\n          display: 'none'\n        },\n        onChange: e => setFile(e.target.files[0])\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(InputBase, {\n        placeholder: \"Title...\",\n        name: \"title\",\n        onChange: e => handleChange(e),\n        value: post.title,\n        className: classes.textfield\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => updateBlog(),\n        variant: \"contained\",\n        color: \"primary\",\n        children: \"Update\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TextareaAutosize, {\n      className: classes.textarea,\n      rowsMin: 5,\n      placeholder: \"Write your story...\",\n      name: \"description\",\n      value: post.description,\n      onChange: e => handleChange(e)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n};\n\n_s(UpdateView, \"VbJUT4Sk/5pgkd024S45Mr1cn5g=\", false, function () {\n  return [useHistory];\n});\n\n_c3 = UpdateView;\nexport default UpdateView;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Styles$makeStyles\");\n$RefreshReg$(_c2, \"Styles\");\n$RefreshReg$(_c3, \"UpdateView\");","map":{"version":3,"sources":["C:/Users/rihan/Downloads/Blog-Website-main/Blog-Website-main/client/src/components/Post/UpdateView.jsx"],"names":["Box","makeStyles","FormControl","InputBase","Button","TextareaAutosize","useState","useEffect","AddCircle","getPost","updatePost","uploadFile","useHistory","Styles","theme","container","padding","breakpoints","down","image","width","height","objectFit","form","display","flexDirection","marginTop","textfield","flex","fontSize","margin","textarea","border","outline","initialValues","title","description","picture","username","categories","createdDate","Date","UpdateView","match","classes","history","post","setPost","file","setFile","setImage","url","getImage","data","FormData","append","name","fetchData","params","id","console","log","handleChange","e","target","value","updateBlog","push","files"],"mappings":"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","sourcesContent":["import { Box, makeStyles, FormControl, InputBase, Button, TextareaAutosize } from \"@material-ui/core\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { AddCircle } from \"@material-ui/icons\";\r\nimport { getPost, updatePost, uploadFile } from \"../../services/api\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst Styles = makeStyles((theme) => ({\r\n  container: {\r\n    padding: \"0px 100px\",\r\n    [theme.breakpoints.down(\"md\")]: {\r\n      padding: 0,\r\n    },\r\n  },\r\n  image: {\r\n    width: \"100%\",\r\n    height: \"50vh\",\r\n    objectFit: \"cover\",\r\n  },\r\n  form: {\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    marginTop: \"10px\",\r\n  },\r\n  textfield: {\r\n    flex: 1,\r\n    fontSize: 24,\r\n    margin: \"0px 25px\",\r\n  },\r\n  textarea:{\r\n     marginTop: 10,\r\n     width:'100%',\r\n     border:'none',\r\n     fontSize: 20,\r\n     '&:focus-visible':{\r\n        outline:'none'\r\n     }\r\n  }\r\n}));\r\nconst initialValues = {\r\n  title: \"\",\r\n  description: \"\",\r\n  picture: \"\",\r\n  username: \"anubhavlal\",\r\n  categories: \"All\",\r\n  createdDate: new Date(),\r\n};\r\nconst UpdateView = ({ match }) => {\r\n  const classes = Styles();\r\n  \r\n  const history = useHistory();\r\n  const [post,setPost] = useState(initialValues);\r\n  const [file, setFile] = useState('');\r\n  const [image, setImage] = useState('');\r\n  const url = post.picture ? post.picture : \"https://images.pexels.com/photos/374631/pexels-photo-374631.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940\";\r\n\r\n  useEffect (()=> {\r\n    const getImage = async () =>{\r\n      if(file){\r\n        const data = new FormData();\r\n        data.append(\"name\",file.name);\r\n        data.append(\"file\",file);\r\n        \r\n        let image = await uploadFile(data);\r\n        post.picture = image.data;\r\n        setImage(image.data);\r\n      }\r\n    }\r\n    getImage();\r\n  }, [file,post])\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      let data = await getPost(match.params.id);\r\n      console.log(data);\r\n      setPost(data);\r\n    }\r\n    fetchData();\r\n  },[match.params.id])\r\n\r\n  const handleChange = (e) =>{\r\n    setPost({...post,[e.target.name]:e.target.value})\r\n  }\r\n  const updateBlog = async () => {\r\n    await updatePost(match.params.id, post);\r\n    history.push(`/details/${match.params.id}`);\r\n  }\r\n\r\n  return (\r\n    <Box className={classes.container}>\r\n      <img src={url} alt=\"banner\" className={classes.image} />\r\n      <FormControl className={classes.form}><label htmlFor='fileInput'>\r\n        <AddCircle fontSize=\"large\" color=\"error\" cursor='pointer' />\r\n        </label>\r\n        <input \r\n          type='file'\r\n          id='fileInput'\r\n          style={{display:'none'}}\r\n          onChange ={(e) => setFile(e.target.files[0])}\r\n        />\r\n        <InputBase placeholder=\"Title...\" name='title' onChange={(e) => handleChange(e)} value={post.title} className={classes.textfield} />\r\n        <Button onClick={()=> updateBlog()} variant=\"contained\" color=\"primary\">Update</Button>\r\n      </FormControl>\r\n      <TextareaAutosize\r\n         className={classes.textarea}\r\n         rowsMin={5}\r\n         placeholder='Write your story...'\r\n         name='description'\r\n         value={post.description}\r\n         onChange={(e) => handleChange(e)}\r\n      />\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default UpdateView;\r\n"]},"metadata":{},"sourceType":"module"}